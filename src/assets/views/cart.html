<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito (simulado) | Ballers</title>
  <link rel="stylesheet" href="../css/base.css"/>
  <style>
    .cart{padding:24px 0 64px}
    .cart h1{margin:0 0 12px}
    .cart__table{width:100%; border-collapse:collapse}
    .cart__table th,.cart__table td{border:1px solid #2a2a32; padding:10px; text-align:left}
    .cart__table th{background:#141419}
    .qty{display:inline-flex; gap:6px; align-items:center}
    .qty button{border:1px solid #2a2a32;background:#1c1c22;color:var(--text); padding:4px 8px; border-radius:8px; cursor:pointer}
    .remove{border:1px solid #2a2a32;background:#1c1c22;color:var(--text); padding:6px 10px; border-radius:10px; cursor:pointer}
    .cart__summary{margin-top:16px; display:flex; justify-content:flex-end}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <!-- Header (igual a tus otras p√°ginas) -->
  <header class="header">
    <div class="container header__inner">
      <a class="logo" href="../../../index.html">Ballers <span aria-hidden="true">üèÄüëü</span></a>

      <form class="search" role="search" aria-label="Buscar productos">
        <label class="visually-hidden" for="q">Buscar</label>
        <input id="q" type="search" placeholder="Buscar sneakers, jerseys, gorras‚Ä¶" />
        <button type="submit" aria-label="Buscar">üîç</button>
      </form>

      <button class="nav__toggle" aria-expanded="false" aria-controls="mainnav">‚ò∞</button>
      <nav id="mainnav" class="nav">
        <ul>
          <li><a href="../../../index.html">Inicio</a></li>
          <li><a href="catalog.html">Cat√°logo</a></li>
          <li><a class="active" href="cart.html">Carrito</a></li>
          <li class="has-submenu">
            <button class="submenu__toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="doc-submenu">
              Documentaci√≥n <span class="caret" aria-hidden="true">‚ñæ</span>
            </button>
            <ul id="doc-submenu" class="submenu" role="menu" hidden>
              <li role="none"><a role="menuitem" href="tecnologia.html">Tecnolog√≠a propuesta</a></li>
              <li role="none"><a role="menuitem" href="disponibilidad.html">Disponibilidad</a></li>
              <li role="none"><a role="menuitem" href="servicio.html">Servicio</a></li>
              <li role="none"><a role="menuitem" href="sla.html">SLA</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container cart">
    <h1>Carrito <span class="muted">(simulado)</span></h1>
    <p class="muted">Basado en <code>products.json</code>. Los botones <strong>+</strong>/<strong>‚àí</strong>/<strong>Eliminar</strong> est√°n presentes pero sin funcionalidad (mock).</p>

    <section id="cart-root">
      <table class="cart__table" aria-describedby="cart-note">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="cart-rows"></tbody>
      </table>
      <div class="cart__summary">
        <h3>Total: <span id="cart-total">$0.00</span></h3>
      </div>
      <p id="cart-note" class="muted">UI de demostraci√≥n para el flujo de compra.</p>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <small>¬© 2025 Ballers. Todos los derechos reservados.</small>
      <nav aria-label="Legal">
        <a href="#">T√©rminos</a>
        <a href="#">Privacidad</a>
        <a href="#">Contacto</a>
      </nav>
    </div>
  </footer>

  <script src="../js/app.js"></script>
  <script>
  (async () => {
    try {
      const res = await fetch('../data/products.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('No se pudo cargar products.json');
      const products = await res.json();

      // Carrito "de mentiras": toma los 3 primeros productos y les pone cantidades fijas
      const mock = products.slice(0,3).map((p,i) => ({ id: p.id, qty: [1,2,1][i] || 1 }));

      const money = n => n.toLocaleString('es-MX', { style:'currency', currency:'MXN' });
      const find = id => products.find(p => p.id === id);

      const rows = document.getElementById('cart-rows');
      let total = 0;

      rows.innerHTML = mock.map(item => {
        const p = find(item.id) || {};
        const subtotal = (p.price || 0) * item.qty;
        total += subtotal;
        return `
          <tr>
            <td>${p.name || item.id}</td>
            <td>${money(p.price || 0)}</td>
            <td>
              <div class="qty">
                <button type="button">‚àí</button>
                <span>${item.qty}</span>
                <button type="button">+</button>
              </div>
            </td>
            <td>${money(subtotal)}</td>
            <td><button type="button" class="remove">Eliminar</button></td>
          </tr>`;
      }).join('');

      document.getElementById('cart-total').textContent = money(total);
    } catch (err) {
      document.getElementById('cart-root').innerHTML = `
        <article class="card" style="padding:16px">
          <h3>Error</h3>
          <p class="muted">${err.message}</p>
        </article>`;
    }
  })();
  </script>
</body>
</html>
